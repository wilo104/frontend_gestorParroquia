<h2>Gestión de Egresos</h2>

<div class="formulario">
  <select [(ngModel)]="categoria">
    <option *ngFor="let c of categorias" [value]="c">{{ c }}</option>
  </select>

  <input type="text" [(ngModel)]="descripcion" placeholder="Descripción" />
  <input type="number" [(ngModel)]="monto" placeholder="Monto (S/.)" />
  <input type="date" [(ngModel)]="fecha" />

  <button (click)="guardar()" class="btn-guardar">
    {{ editando ? '💾 Actualizar' : '➕ Agregar' }}
  </button>

  <button *ngIf="editando" (click)="cancelarEdicion()" class="btn-cancelar">
    ❌ Cancelar
  </button>
</div>

<p *ngIf="errorMsg" class="error">{{ errorMsg }}</p>

<table>
  <thead>
    <tr>
      <th>Categoría</th>
      <th>Descripción</th>
      <th>Monto</th>
      <th>Fecha</th>
      <th>Acciones</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let item of egresos">
      <td>{{ item.categoria }}</td>
      <td>{{ item.descripcion }}</td>
      <td>{{ item.monto | currency:'PEN' }}</td>
      <td>{{ item.fecha | date:'shortDate' }}</td>
      <td>
        <button (click)="editar(item)">✏️ Editar</button>
        <button (click)="eliminar(item.id)">🗑️ Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>
